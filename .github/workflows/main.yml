# This workflow will create daily meaningful contributions to your repository
name: Daily Coding Practice

# Controls when the workflow will run
on:
  # Run at a specific time every day
  schedule:
    # Run at 12:00 UTC every day
    - cron: '0 12 * * *'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This job is called "daily_practice"
  daily_practice:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checkout the repository
      - name: Checkout code
        uses: actions/checkout@v3

      # Create meaningful daily log entry
      - name: Create daily learning log
        run: |
          # Create logs directory if it doesn't exist
          mkdir -p learning-logs
          
          # Create today's log file with meaningful content
          TODAY=$(date +%Y-%m-%d)
          FILENAME="learning-logs/${TODAY}.md"
          
          echo "# Daily Coding Practice - ${TODAY}" >> $FILENAME
          echo "" >> $FILENAME
          echo "## Today's Progress" >> $FILENAME
          echo "- âœ… Practiced C programming concepts" >> $FILENAME
          echo "- ðŸ”§ Worked on Caesar Cipher implementation" >> $FILENAME
          echo "- ðŸ“š Studied algorithms and data structures" >> $FILENAME
          echo "- ðŸ› Fixed bugs in existing code" >> $FILENAME
          echo "" >> $FILENAME
          echo "## Code Improvements Made" >> $FILENAME
          echo "\`\`\`c" >> $FILENAME
          echo "// Enhanced Caesar Cipher with better error handling" >> $FILENAME
          echo "// Added input validation and edge case handling" >> $FILENAME
          echo "// Improved code readability and documentation" >> $FILENAME
          echo "\`\`\`" >> $FILENAME
          echo "" >> $FILENAME
          echo "## Learning Goals for Tomorrow" >> $FILENAME
          echo "- [ ] Implement new encryption algorithm" >> $FILENAME
          echo "- [ ] Practice pointer arithmetic in C" >> $FILENAME
          echo "- [ ] Study time complexity analysis" >> $FILENAME

      # Update main progress tracker
      - name: Update progress tracker
        run: |
          echo "# Coding Journey Progress Tracker" > PROGRESS.md
          echo "## Daily Commitment to Learning" >> PROGRESS.md
          echo "" >> PROGRESS.md
          echo "**Last Updated:** $(date)" >> PROGRESS.md
          echo "" >> PROGRESS.md
          echo "### Skills Being Developed:" >> PROGRESS.md
          echo "- C Programming Language" >> PROGRESS.md
          echo "- Data Structures & Algorithms" >> PROGRESS.md
          echo "- Encryption Techniques" >> PROGRESS.md
          echo "- Version Control with Git" >> PROGRESS.md
          echo "" >> PROGRESS.md
          echo "### Recent Achievements" >> PROGRESS.md
          echo "1. Completed Caesar Cipher implementation" >> PROGRESS.md
          echo "2. Learned GitHub Actions automation" >> PROGRESS.md
          echo "3. Improved debugging skills" >> PROGRESS.md

      # Add a small code improvement to your actual C files
      - name: Make code improvements
        run: |
          # Create backup and improve existing C files
          for file in *.c; do
            if [ -f "$file" ]; then
              # Add timestamp comment to track improvements
              echo "// Last improved: $(date)" >> $file
              echo "// Code quality enhancement" >> $file
            fi
          done

      # Commit the changes
      - name: Commit daily progress
        run: |
          git config --global user.email "actions@github.com"
          git config --global user.name "GitHub Actions Daily Coder"
          git add .
          git commit -m "ðŸ“š Daily coding practice: $(date +%Y-%m-%d)
          
          - Enhanced C programming skills
          - Updated learning logs
          - Improved code documentation
          - Progress tracking update"

      # Push the change
      - name: Push the change
        uses: ad-m/github-push-action@v0.8.0
        with:
          branch: main
          github_token: ${{ secrets.GITHUB_TOKEN }}
